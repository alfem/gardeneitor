{% extends 'base.html' %}

{% block scripts %}
    {{ super() }}
    <script src="{{ url_for('static', filename='js/index.js') }}"></script>
    <link href="{{ url_for('static', filename='css/sweetalert2.css') }}" rel="stylesheet">
{% endblock %}

{% block title %}GARDENEITOR{% endblock %}

{% block page_content %}
    <p>Start and stop every valve manually, or run the scheduled program if desired. Emergency stop closed all the valves and stop the pump. Power off button shutdowns the whole server.</p>

<ul class="nav nav-tabs">
  <li class="active"><a data-toggle="tab" href="#actions">Actions</a></li>
  <li><a data-toggle="tab" href="#program">Program</a></li>
  <li><a data-toggle="tab" href="#log">Log</a></li>
</ul>

<div class="tab-content">

  <div id="actions" class="tab-pane fade in active">

    <table class="table table-bordered">
        <tbody>
        <tr>
            <th scope="row">General </th>
            <td>
                <div class="btn-group-lg" role="group">
                    <button type="button" class="btn btn-block btn-info" id="status" onclick="status();">STATUS</button>
                </div>
            </td>
        </tr>
        </tbody>
    </table>


    <table class="table table-bordered">
        <tbody>
        <tr>
            <th scope="row">Pump</th>
            <td>
                <div class="btn-group-lg" role="group" aria-label="Pump">
                    <button type="button" class="btn btn-success" id="on-1" onclick="setPump(true);">On</button>
                    <button type="button" class="btn btn-danger" id="off-1" onclick="setPump(false);">Off</button>
                </div>
            </td>
        </tr>
        <tr>
            <th scope="row">Valve 1</th>
            <td>
                <div class="btn-group-lg" role="group" aria-label="Valve 1">
                    <button type="button" class="btn btn-success" id="on-1" onclick="setRelay(1, true);">On</button>
                    <button type="button" class="btn btn-danger" id="off-1" onclick="setRelay(1, false);">Off</button>
                </div>
            </td>
        </tr>
        <tr>
            <th scope="row">Valve 2</th>
            <td>
                <div class="btn-group-lg" role="group" aria-label="Valve 2">
                    <button type="button" class="btn btn-success" id="on-2" onclick="setRelay(2, true);">On</button>
                    <button type="button" class="btn btn-danger" id="off-2" onclick="setRelay(2, false);">Off</button>
                </div>
            </td>
        </tr>
        <tr>
            <th scope="row">Valve 3</th>
            <td>
                <div class="btn-group-lg" role="group" aria-label="Valve 3">
                    <button type="button" class="btn btn-success" id="on-3" onclick="setRelay(3, true);">On</button>
                    <button type="button" class="btn btn-danger" id="off-3" onclick="setRelay(3, false);">Off</button>
                </div>
            </td>
        </tr>
        <tr>
            <th scope="row">Valve 4</th>
            <td>
                <div class="btn-group-lg" role="group" aria-label="Valve 4">
                    <button type="button" class="btn btn-success" id="on-4" onclick="setRelay(4, true);">On</button>
                    <button type="button" class="btn btn-danger" id="off-4" onclick="setRelay(4, false);">Off</button>
                </div>
            </td>
        </tr>
        </tbody>
    </table>

    <table class="table table-bordered">
        <tbody>
      <tr>
            <th scope="row">Emergency</th>
            <td>
                <div class="btn-group-lg btn-group-justified" role="group">                
                 <div class="btn-group" role="group">

                    <button type="button" class="btn btn-warning" id="stop-all" onclick="stop-all();">STOP ALL</button>
                  </div>
                 <div class="btn-group" role="group">
                    <button type="button" class="btn btn-danger" id="power-off" onclick="power-off();">POWER OFF</button>
                  </div>
                </div>
            </td>
        </tr>
 
        </tbody>
    </table>

  </div>

  <div id="program" class="tab-pane fade">
  <form id=programForm>
    <table class="table table-bordered">
        <tbody>
         <tr>
            <th scope="row">Actions</th>
            <td>
                <div class="btn-group-lg" role="group">
                    <button type="button" class="btn btn-success" id="btProgramEnable" onclick="programSwitch(true);">Enable</button>
                    <button type="button" class="btn btn-danger" id="btProgramDisable" onclick="programSwitch(false);">Disable</button>
                    <button type="button" class="btn btn-info" id="btProgramRun" onclick="programRun();">Run Now</button>
                    <button type="button" class="btn btn-info" id="btProgramSave" onclick="programSave();">Save Changes</button>
                </div>
            </td>
        </tr>

         <tr>
            <th scope="row">Schedule</th>
            <td>
                <label class="checkbox-inline"><input name='MON' type="checkbox" value="1">Mon</label>
                <label class="checkbox-inline"><input name='TUE' type="checkbox" value="1">Tue</label>
                <label class="checkbox-inline"><input name='WED' type="checkbox" value="1">Wed</label> 
                <label class="checkbox-inline"><input name='THU' type="checkbox" value="1">Tue</label>
                <label class="checkbox-inline"><input name='FRI' type="checkbox" value="1">Fri</label>
                <label class="checkbox-inline"><input name='SAT' type="checkbox" value="1">Sat</label> 
                <label class="checkbox-inline"><input name='SUN' type="checkbox" value="1">Sun</label> 
<label class="checkbox-inline">Time:
                <input type="time" name="scheduleTime" placeholder="hr:min" pattern="^([0-1]?[0-9]|2[0-4]):([0-5][0-9])(:[0-5][0-9])?$" class="inputs time" required></label>
            </td>
         </tr>

         <tr>
            <th scope="row">Program</th>
            <td>

             <div class="form-group">
              <label for="comment">One line per valve, in this format: valve minutes</label>
              <textarea name="program" class="form-control" rows="5" id="comment"></textarea>
            </div> 
            </td>

        </tr>
        </tbody>
    </table>
    </form>
</div>



  <div id="log" class="tab-pane fade">
  <h1>Log</h1>
  <div id="logbox" class="pre-scrollable">Log goes here</div>  

</div>
</div>

{% endblock %}
